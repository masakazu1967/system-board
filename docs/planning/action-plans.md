# System Board アクションプラン

最終更新日: 2025年9月13日
議事録ベース更新: 2025-09-13-07-change-architecture.md

## 1. アーキテクチャ基盤構築

### 1.1 オニオンアーキテクチャ実装 🔄

- [x] ヘキサゴナルアーキテクチャ設計完了
- [ ] **オニオンアーキテクチャ設計詳細化** - 担当: ソフトウェアアーキテクト - 期限: 1週間 - 優先度: HIGH
  - [ ] ドメイン層の Pure TypeScript classes 設計
  - [ ] アプリケーション層の NestJS サービス設計
  - [ ] インフラ層の Repository pattern 設計
- [ ] **モジュラーモノリス構造設計** - 期限: 4週間
  - [ ] システム管理コンテキスト実装
  - [ ] タスク管理コンテキスト実装
  - [ ] 脆弱性管理コンテキスト実装
  - [ ] 関連性管理コンテキスト実装

### 1.2 技術スタック変更

#### データベース層

- [x] PostgreSQL 採用決定（リードモデル）
- [x] Kurrent DB 採用決定（イベントストア）
- [x] Redis 採用決定（キャッシュ・セッション管理）
- [ ] **クラウドマネージドサービス検討** - 担当: データベースアーキテクト - 期限: 2週間

#### 監視スタック変更 (2025-09-13会議決定)

- [x] ~~ELK Stack環境構築~~ → **Grafana Loki採用**
- [ ] **Grafana Loki検証環境構築** - 担当: DevOpsエンジニア - 期限: 2週間 - 優先度: MEDIUM
- [ ] **構造化エラーログ機能設計・実装** - 期限: 4週間
- [ ] Prometheus + Grafana監視継続
- [x] ~~GlitchTip導入~~ → **延期** (Grafana Lokiで70%機能代替、Phase 2以降に再検討)

## 2. パブリッククラウド戦略

### 2.1 条件付き採用 (2025-09-13会議決定)

- [ ] **セキュリティ要件完全クリア** - 担当: セキュリティエンジニア - 期限: 1週間 - 優先度: HIGH
  - [ ] 日本リージョン限定データ保持
  - [ ] BYOK暗号化実装
  - [ ] VPCマイクロセグメンテーション
  - [ ] 専用セキュリティサブネット設計
- [ ] **コスト効果分析** - 検討期間: 6ヶ月
  - 予算影響: 年間+$25,000見込み

### 2.2 マネージドサービス戦略

- [ ] **PostgreSQL**: クラウドマネージドサービス評価
- [ ] **Redis**: マネージドサービス採用推奨
- [ ] **Kurrent DB**: コンテナベース自己管理 + クラウド最適化

## 3. セキュリティ強化

### 3.1 認証・認可システム

- [x] Auth0 Free Tier採用決定
- [x] OAuth2.0 + JWT実装計画
- [x] RBAC設計
- [ ] **多要素認証（MFA）実装** - 期限: 6週間
- [ ] **Active Directory統合認証** - 期限: 8週間
- [ ] **Azure AD B2B / AWS SSO統合** - 担当: セキュリティエンジニア - 期限: 2週間 - 優先度: HIGH
- [ ] **条件付きアクセスポリシー設定** - 担当: セキュリティエンジニア - 期限: 2週間 - 優先度: HIGH

### 3.2 データ保護

- [x] TLS1.3通信暗号化
- [x] データベース暗号化設計
- [ ] **BYOK（Bring Your Own Key）実装** - 担当: セキュリティエンジニア + DevOpsエンジニア - 期限: 2025-09-21 - 優先度: CRITICAL
  - [ ] Azure Key Vault / AWS KMS設定
  - [ ] キーローテーション自動化（90日間隔）
  - [ ] キーエスクロー・復旧手順確立
- [ ] **VPCマイクロセグメンテーション実装** - 担当: DevOpsエンジニア - 期限: 2週間 - 優先度: HIGH
  - [ ] 機密データ処理専用サブネット（10.100.1.0/24）
  - [ ] 一般監視データサブネット（10.100.2.0/24）
  - [ ] アプリケーション統合サブネット（10.100.3.0/24）
- [ ] **機密データ自動マスキング実装** - 期限: 4週間
  - [ ] 認証情報・APIキーマスキング
  - [ ] 内部システムホスト名除外
  - [ ] 機密設定情報フィルタリング
  - [ ] Grafana Loki機密データマスキング実装

### 3.3 監査・コンプライアンス

- [ ] **ISO27001対応実装** - 期限: 12週間
  - [ ] 情報セキュリティ方針策定・承認 - 担当: セキュリティエンジニア - 期限: 2025-09-21
  - [ ] 資産目録作成・維持 - 担当: システムアーキテクト - 期限: 2025-09-28
  - [ ] 情報分類基準策定 - 担当: セキュリティエンジニア - 期限: 2025-09-21
  - [ ] 職務分離実装 - 担当: プロダクトマネージャー - 期限: 2025-09-30
- [ ] **NIST Cybersecurity Framework対応** - 期限: 10週間
  - [ ] サイバーセキュリティガバナンス確立 - 担当: プロダクトマネージャー - 期限: 2025-10-15
  - [ ] リスク評価プロセス実装 - 担当: セキュリティエンジニア - 期限: 2025-09-30
- [ ] **製造業セキュリティ基準対応** - 期限: 12週間
  - [ ] Industry 4.0 Security統制実装 - 担当: システムアーキテクト + セキュリティエンジニア - 期限: 2025-11-30
  - [ ] サプライチェーンセキュリティ評価基準策定 - 担当: プロダクトマネージャー - 期限: 2025-12-31
- [ ] **OWASP Top 10チェック体制構築** - 期限: 4週間
- [ ] **全操作ログ記録システム** - 期限: 6週間
- [ ] **継続的コンプライアンス監視システム** - 担当: DevOpsエンジニア - 期限: 2025-10-05

## 4. 外部システム連携

### 4.1 API統合実装

- [ ] **GitHub API連携** - 期限: 8週間
  - [ ] リポジトリ情報取得
  - [ ] dependency情報取得
- [ ] **NVD API連携** - 期限: 6週間
  - [ ] CVE情報自動取得
  - [ ] 脆弱性評価自動化
- [ ] **EndOfLife.date API連携** - 期限: 6週間
  - [ ] サポート終了情報定期取得

### 4.2 通信方式段階移行

- [x] REST API実装（初期・外部向け）
- [ ] **gRPC実装** - 期限: 16週間（マイクロサービス間通信）
- [ ] **GraphQL実装** - 期限: 20週間（クライアント向け）

## 5. ユーザーインターフェース

### 5.1 フロントエンド開発

- [x] React + TypeScript採用決定
- [ ] **ダッシュボード優先表示項目実装** - 期限: 8週間
  - [ ] 緊急対応要システム数（赤色アラート）
  - [ ] EOL30日以内のパッケージリスト
  - [ ] 新規発見脆弱性数（直近7日間）
  - [ ] 対応遅延タスク数

### 5.2 アクセシビリティ

- [ ] **ダークモード対応** - 期限: 12週間
- [ ] **カラーユニバーサルデザイン** - 期限: 10週間
- [ ] **キーボードナビゲーション対応** - 期限: 10週間

### 5.3 可視化機能

- [ ] **システム関連性グラフ表示** - 期限: 16週間
  - [ ] システムをノード表示
  - [ ] 依存関係を線で表示
  - [ ] インタラクティブな操作対応

## 6. イベント駆動アーキテクチャ

### 6.1 イベントソーシング実装

- [x] Kurrent DB環境設計
- [ ] **イベントストリーム設計** - 期限: 6週間
  - [ ] アグリゲート単位でのストリーム
  - [ ] 100イベント毎スナップショット
- [ ] **プロジェクション実装** - 期限: 8週間
  - [ ] Kurrent DB→PostgreSQL リードモデル構築

### 6.2 メッセージング

- [x] Apache Kafka採用決定
- [ ] **Kafka高可用性構成** - 期限: 10週間
  - [ ] 3ノードクラスター構築
  - [ ] KRaft採用（ZooKeeper依存除去）
- [ ] **Outboxパターン実装** - 期限: 8週間
  - [ ] トランザクション整合性保証
  - [ ] PostgreSQL→Kafka イベント発行

### 6.3 Sagaパターン

- [ ] **オーケストレーション型Saga実装** - 期限: 12週間
  - [ ] 脆弱性対応ワークフロー
  - [ ] システム更新プロセス
  - [ ] 補償処理設計

## 7. 運用・監視体制

### 7.1 可観測性

- [ ] **Grafana Loki + Prometheus統合** - 期限: 4週間
- [ ] **OpenTelemetry + NestJS統合** - 期限: 6週間
- [ ] **Jaeger分散トレーシング** - 期限: 8週間（Phase 3）

### 7.2 アラート・エスカレーション

- [x] Microsoft Teams統合決定
- [ ] **AlertManager設定** - 期限: 4週間
- [ ] **セキュリティアラート強化** - 担当: セキュリティエンジニア - 期限: 2週間 - 優先度: HIGH
  - [ ] 不正アクセス検知アラート（5分以内検知）
  - [ ] 大量データエクスポート検知・ブロック
  - [ ] 機密データアクセス監視アラート
  - [ ] システム設定変更検知アラート
- [ ] **脆弱性対応時間3日以内体制** - 期限: 8週間
  - [ ] 重要度別エスカレーション自動化
  - [ ] タスク状況自動ダッシュボード更新
- [ ] **インシデント対応自動化** - 担当: セキュリティエンジニア - 期限: 4週間
  - [ ] セキュリティインシデント自動対応スクリプト実装
  - [ ] フォレンジック証拠自動保全システム構築

## 8. 品質保証・テスト

### 8.1 テスト戦略

- [x] 80%テストカバレッジ目標設定
- [ ] **単体テスト実装** - 期限: 継続的実装
- [ ] **統合テスト実装** - 期限: 10週間
- [ ] **セキュリティテスト実装** - 期限: 8週間

### 8.2 継続的インテグレーション

- [ ] **GitHub Flow CI/CD構築** - 期限: 6週間
- [ ] **最小2レビュアー + 専門家承認体制** - 期限: 4週間
- [ ] **Conventional Commits運用** - 期限: 2週間

## 9. データ管理・バックアップ

### 9.1 データライフサイクル

- [ ] **5年間データ保持実装** - 期限: 8週間
- [ ] **論理削除運用** - 期限: 4週間
- [ ] **パーティショニング設計** - 期限: 6週間

### 9.2 バックアップ戦略

- [ ] **日次フルバックアップ実装** - 期限: 4週間
- [ ] **時間毎増分バックアップ** - 期限: 6週間
- [ ] **RTO 4時間以内体制** - 期限: 8週間
- [ ] **マルチリージョン災害復旧** - 担当: DevOpsエンジニア - 期限: 6週間
  - [ ] プライマリ：Japan East（東京）
  - [ ] セカンダリ：Japan West（大阪）
  - [ ] 災害復旧テスト自動化（四半期実施）

## 10. 開発環境・運用準備

### 10.1 開発環境

- [x] ~~npm/yarn禁止~~ → **pnpm >=10.15.1必須使用**
- [x] Node.js >=24.0.0要件
- [x] モノレポ構成確定
- [ ] **turbo利用最適化** - 期限: 2週間

### 10.2 本格運用準備

- [ ] **全社データ投入** - 期限: 48週間（フェーズ4）
- [ ] **運用テスト実施** - 期限: 44週間
- [ ] **ドキュメント整備** - 期限: 46週間

## 11. スケジュール概要

### フェーズ1: 基盤構築（2025年10月～12月）

- オニオンアーキテクチャ実装
- Grafana Loki環境構築
- セキュリティ基盤実装

### フェーズ2: 基本機能実装（2026年1月～5月）

- システム情報管理機能
- タスク管理機能
- 基本UI実装

### フェーズ3: 拡張機能実装（2026年6月～9月）

- システム関連性管理機能
- 分析・レポート機能
- マイクロサービス化

### フェーズ4: 本格運用準備（2026年10月）

- 全社データ投入
- 運用テスト
- ドキュメント整備

## 12. 会議開催予定

### 開発・プロジェクト会議

- **進捗確認会議**: 2025年9月20日
- **第1スプリントプランニング**: 2025年9月18日（予定変更の可能性）
- **Phase 1実装進捗レビュー**: 2025年9月19日（監視スタック関連）

### セキュリティ・コンプライアンス会議

- **情報セキュリティ方針承認会議**: 2025年9月21日（セキュリティエンジニア主催）
- **月次セキュリティレビュー**: 2025年10月14日（セキュリティエンジニア主催）
- **四半期セキュリティレビュー**: 2025年12月14日（プロダクトマネージャー + セキュリティエンジニア主催）
  - セキュリティ方針・手順見直し
  - リスク評価更新
  - インシデント対応訓練
  - 災害復旧テスト
- **年次包括セキュリティ評価**: 2026年9月14日（プロダクトマネージャー主催）
  - 外部監査・認証更新
  - セキュリティ戦略見直し
  - 予算・リソース計画更新

### 監査・評価会議

- **コンプライアンス状況レビュー**: 2025年10月14日（セキュリティエンジニア主催）
- **ISO 27001準拠状況確認会議**: 2025年10月31日（プロダクトマネージャー + セキュリティエンジニア）
- **製造業セキュリティ基準適合性確認**: 2025年11月30日（システムアーキテクト + セキュリティエンジニア）

---

**📝 変更履歴**:

- **2025-09-13**: アーキテクチャ変更会議決定事項を反映
  - ヘキサゴナル→オニオンアーキテクチャ変更
  - ELK Stack→Grafana Loki変更
  - GlitchTip導入延期（Phase 2以降に再検討）
  - パブリッククラウド条件付き採用
- **2025-09-12**: Sentry導入見送り、自己ホスティング監視スタック強化決定
- **2025-09-11**: プロジェクト憲章承認、技術スタック合意
