# 開発ワークフロー

## 概要

本プロジェクトは、ドメイン駆動設計（DDD）の思想に基づき、クリーンアーキテクチャで実装します。
開発手法にはスクラムを採用し、以下のロール構成で進行します。

## ロール構成

### 親エージェント

- **プロダクトマネージャー**: プロダクト全体の戦略・方針決定、プロダクトバックログ管理

### サブエージェント

- **要求分析**: 要件定義、ユーザーストーリー作成、受け入れ条件定義
- **UX/UIデザイナー**: ユーザー体験設計、インターフェース設計、プロトタイプ作成
- **アーキテクト**: システム全体設計、技術選定、アーキテクチャ方針決定
- **フロントエンドエンジニア**: UI実装、プレゼンテーション層開発
- **バックエンドエンジニア**: ビジネスロジック実装、API開発、ドメイン層・アプリケーション層開発
- **データベースエンジニア**: データ設計、インフラストラクチャ層（データ永続化）開発
- **テストエンジニア**: テスト戦略策定、テストケース作成、品質保証
- **セキュリティエンジニア**: セキュリティ設計、脆弱性検査、セキュリティ監査
- **DevOpsエンジニア**: CI/CD構築、インフラ管理、デプロイ自動化

## スクラム開発ワークフロー

### スプリント前準備フェーズ

#### 1. プロダクトバックログ作成・整備

**担当ロール**:

- プロダクトマネージャー: ビジネス価値の優先順位付け、ステークホルダー調整
- 要求分析: 要件の分析・整理、ユーザーストーリー作成

**前提条件**:

- ビジネス要件
- ステークホルダー要望

**成果物**:

- プロダクトバックログアイテム
- ユーザーストーリー
- 受け入れ条件
- ユーザーペルソナ

#### 2. ドメインモデリング

**担当ロール**:

- アーキテクト: ドメイン境界の定義、モデル構造設計
- 要求分析: ビジネスルールの抽出・整理
- バックエンドエンジニア: 技術的実現性の検証

**前提条件**:

- プロダクトバックログアイテム
- ユーザーストーリー
- ビジネスルール定義

**成果物**:

- ドメインモデル図
- 境界づけられたコンテキスト定義
- ドメインサービス仕様

#### 3. アーキテクチャ設計

**担当ロール**:

- アーキテクト: システム全体設計、技術選定、アーキテクチャパターン適用

**前提条件**:

- ドメインモデル図
- 境界づけられたコンテキスト定義
- 非機能要件
- 技術制約条件

**成果物**:

- システム全体アーキテクチャ図
- クリーンアーキテクチャ層構成定義
- 技術スタック選定書

### スプリントプランニング

#### 4. スプリントバックログ作成

**担当ロール**:

- プロダクトマネージャー: 優先順位決定、スプリントゴール設定
- 全開発チーム: 作業量見積もり、タスク分解

**前提条件**:

- 優先順位付きプロダクトバックログ
- チーム稼働時間
- 過去スプリントのベロシティ
- スプリントゴール

**成果物**:

- スプリントバックログ
- タスク分解
- 見積もり

### スプリント実行フェーズ

#### 5. UX/UI設計

**担当ロール**:

- UX/UIデザイナー: ユーザー体験設計、画面設計、プロトタイプ作成

**前提条件**:

- ユーザーストーリー
- 受け入れ条件
- ユーザーペルソナ
- デザインガイドライン

**成果物**:

- ワイヤーフレーム
- プロトタイプ
- UI設計書
- 画面遷移図
- 画面設計書

#### 6. データベース設計

**担当ロール**:

- データベースエンジニア: テーブル設計、インデックス設計、パフォーマンス最適化
- アーキテクト: データ構造レビュー、整合性検証

**前提条件**:

- ドメインモデル図
- エンティティ定義
- データアクセスパターン
- パフォーマンス要件

**成果物**:

- データベース設計書
- ER図
- インデックス設計

#### 7. 実装（クリーンアーキテクチャ層別）

##### 7.1 ドメイン層実装

**担当ロール**:

- バックエンドエンジニア: エンティティ実装、ビジネスロジック実装、ドメインサービス開発

**前提条件**:

- ドメインモデル設計書
- ビジネスルール定義
- 境界づけられたコンテキスト

**成果物**:

- エンティティ
- 値オブジェクト
- ドメインサービス
- リポジトリインターフェース

##### 7.2 アプリケーション層実装

**担当ロール**:

- バックエンドエンジニア: ユースケース実装、API開発、DTOマッピング

**前提条件**:

- ドメイン層実装完了
- ユースケース仕様
- API仕様書

**成果物**:

- ユースケース
- アプリケーションサービス
- DTOクラス

##### 7.3 インフラストラクチャ層実装

**担当ロール**:

- バックエンドエンジニア: リポジトリ実装、外部サービス連携
- データベースエンジニア: データアクセス層実装、クエリ最適化

**前提条件**:

- データベース設計書
- リポジトリインターフェース
- 外部サービス仕様
- インフラ環境

**成果物**:

- リポジトリ実装
- 外部サービス連携
- データアクセス層

##### 7.4 プレゼンテーション層実装

**担当ロール**:

- フロントエンドエンジニア: UI実装、状態管理実装、API連携

**前提条件**:

- UI設計書
- プロトタイプ
- API仕様書
- アプリケーション層実装完了

**成果物**:

- コンポーネント
- ルーティング
- 状態管理

#### 8. テスト実装・実行

**担当ロール**:

- テストエンジニア: テスト設計、テストケース作成、品質管理
- 各開発エンジニア: 単体テスト実装、コードレビュー

**前提条件**:

- 実装完了コード
- テスト環境
- 受け入れ条件
- テスト戦略

**成果物**:

- 単体テスト
- 結合テスト
- システムテスト
- 受け入れテスト

#### 9. セキュリティチェック

**担当ロール**:

- セキュリティエンジニア: 脆弱性検査、セキュリティ監査、対策実装

**前提条件**:

- 実装完了アプリケーション
- セキュリティ要件
- 脅威モデル
- セキュリティツール環境

**成果物**:

- セキュリティ監査レポート
- 脆弱性チェック結果
- セキュリティ対策実装

#### 10. CI/CD・デプロイ

**担当ロール**:

- DevOpsエンジニア: CI/CD構築、デプロイ自動化、インフラ管理、監視設定

**前提条件**:

- テスト完了アプリケーション
- インフラ環境
- デプロイ戦略
- 監視要件

**成果物**:

- CI/CDパイプライン
- デプロイ自動化
- 監視・ログ設定

### スプリント終了フェーズ

#### 11. スプリントレビュー

**担当ロール**:

- 全チーム: デモ実施、フィードバック収集・整理、次スプリント計画

**前提条件**:

- 実装完了機能
- デモ環境
- ステークホルダーの参加
- スプリントゴール

**成果物**:

- デモ実施
- フィードバック収集
- プロダクトバックログ更新

#### 12. スプリントレトロスペクティブ

**担当ロール**:

- 全チーム: プロセス振り返り、課題抽出、改善アクション策定

**前提条件**:

- スプリント実行結果
- チームメンバー参加
- 振り返りフレームワーク
- 過去の改善アクション結果

**成果物**:

- 改善アクションプラン
- プロセス改善提案

## デイリースクラム

**担当ロール**: 全開発チーム

**頻度**: 毎日

**内容**:

- 昨日の実施内容報告
- 今日の予定共有
- 障害・課題の共有

## 品質基準

### コード品質

- 各層の責務分離が適切に行われている
- SOLID原則に従った設計
- テストカバレッジ80%以上

### セキュリティ基準

- OWASP Top 10対策済み
- 脆弱性スキャン実行済み
- セキュリティコードレビュー実施済み

### パフォーマンス基準

- レスポンスタイム要件達成
- 負荷テスト実行済み

## 成果物・ドキュメント

### 設計書

- アーキテクチャ設計書
- ドメインモデル設計書
- データベース設計書
- API設計書
- 画面設計書
- 画面遷移図

### テスト関連

- テスト計画書
- テストケース仕様書
- テスト実行結果報告書

### 運用関連

- デプロイ手順書
- 運用監視設定書
- 障害対応手順書

## ツール・環境

### 開発環境

- バージョン管理: Git
- タスク管理: GitHub Issues
- コミュニケーション: Discord

### CI/CD

- 継続的インテグレーション
- 自動テスト実行
- 自動デプロイ

### 品質管理

- 静的解析ツール
- セキュリティスキャンツール
- パフォーマンステストツール
