---
allowed-tools:
  - Bash(git add:*)
  - Bash(git status:*)
  - Bash(git commit:*)
  - Bash(git checkout:*)
  - Bash(git branch:*)
  - Bash(git push:*)
  - Bash(git pull:*)
  - Bash(gh pr create:*)
  - Bash(gh issue:*)
description: 指定された番号のIssueを実行する。
---

# Context

番号$1 のIssueを実行する。

1. スクラムマスターはIssueの状態を`In Progress`に移動する。
2. スクラムマスターはIssueのカスタムプロパティのAgentを確認し、該当するサブエージェントに作業を指示する。
3. 指示を受けたサブエージェントはIssueの内容を確認して作業内容を理解する。
   1. 作業内容を理解できるまで:
      1. 指示を受けたサブエージェントはプロダクトマネージャーに質問のコメントを追加する。
      2. 指示を受けたサブエージェントはプロダクトマネージャーから回答のコメントが来たら内容を理解する。
4. 指示を受けたサブエージェントは`main`の`HEAD`ブランチから新たに開発用のブランチ(`feature/issue-番号-簡潔な説明`)を作成する。
5. 指示を受けたサブエージェントは作業を行う。
6. 指示を受けたサブエージェントは作業が完了したらコミットをして`origin`にプッシュ後、プルリクエストする。適切なサブエージェントもしくはプロダクトマネージャーにレビューを依頼する。
7. 指示を受けたサブエージェントはレビュー依頼をしたIssueの状態を`In Review`にする。
8. 指摘がなくなるまでもしくは10回までレビュールーチンを繰り返す。
   1. レビュー依頼を受けたサブエージェントとプロダクトマネージャーはそれぞれの専門的な観点からレビューを行う。
      1. 指摘事項がある場合:
         1. 指摘を行う。
      2. 指摘事項がない場合:
         1. 指摘事項がないことをコメントする。
   2. いずれかのサブエージェントかプロダクトマネージャの指摘事項がある場合
      1. 指示を受けたサブエージェントはレビュアーから指摘を受けた内容を修正してコミットしてプッシュする。
9. レビュー回数が11回に達した場合:
   1. 指示を受けたサブエージェントは一旦保留してプロダクトマネージャーとアーキテクトの判断を仰ぐ。
   2. プロダクトマネージャーとアーキテクトは`Claude Code`でどうするかについて協議を行う。
10. 指示を受けたサブエージェントは、プロダクトマネージャー宛にレビューが完了したコメントを追加します。
11. プロダクトマネージャーはプルリクエストを`main`ブランチにマージしてIssueを完了します。

## プロダクトマネージャーのマージ権限

@docs/development/git-strategy.md の6. マージ・デプロイに記述してあります。
